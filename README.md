# Телеграм-бот «Этап-Тест 7D»

Этот бот представляет собой опросник для определения стадии духовного развития по 7-уровневой модели, вдохновлённой учением Шри Ауробиндо. Он проводит пользователя через серию вопросов и в конце показывает результат.

## Возможности

- **Три блока вопросов с выбором ответа (A, B, C):** 119 закрытых вопросов для оценки убеждений, состояний и искренности.
- **Автоматический расчёт этапа:** Бот анализирует ответы и определяет текущий этап (от 0 до 7).
- **Проверка на искажение:** Блок C помогает оценить, насколько пользователь склонен давать «социально желательные» ответы.
- **Блок D (интервью):** 10 открытых вопросов, ответы на которые отправляются администратору для более глубокого анализа.
- **Опциональная PDF-сводка:** В будущем планируется генерация PDF-отчёта с ответами на вопросы блока D для пользователя (требует `reportlab`).

---

## Установка и запуск

### 1. Предварительные требования

- Установленный **Python 3.8** или новее.

### 2. Настройка окружения

1.  **Склонируйте или скачайте репозиторий.**
    ```bash
    git clone <адрес_репозитория>
    cd <папка_с_ботом>
    ```
    Или просто скачайте файлы `etap_test_bot.py`, `questions_b.json` и `requirements.txt` в одну папку.

2.  **Создайте и активируйте виртуальное окружение.** Это рекомендуется, чтобы не засорять системные библиотеки.
    ```bash
    # Для Windows
    python -m venv venv
    .\venv\Scripts\activate

    # Для macOS / Linux
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **Установите зависимости.** Все необходимые пакеты перечислены в `requirements.txt`.
    ```bash
    pip install -r requirements.txt
    ```

### 3. Конфигурация

Боту требуются два параметра для работы, которые считываются из файла `config.json`.

1.  **Создайте файл `config.json`** в той же папке, где находится скрипт. Вы можете скопировать и переименовать `config.json.example` или создать его с нуля.

2.  **Заполните `config.json` вашими данными:**
    -   **`BOT_TOKEN`**: Токен вашего Telegram-бота. Чтобы его получить, свяжитесь с ботом `@BotFather` в Telegram, создайте нового бота командой `/newbot` и скопируйте полученный API токен.
    -   **`CHAT_ID_ADMIN`**: Ваш ID в Telegram для получения ответов из блока D. Чтобы его узнать, напишите боту `@userinfobot` и он пришлёт ваш ID. Если вы не хотите получать ответы, можете оставить значение `0`.

**Пример файла `config.json`:**
```json
{
  "BOT_TOKEN": "1234567890:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",
  "CHAT_ID_ADMIN": 987654321
}
```

### 4. Запуск бота

После установки зависимостей и настройки конфигурации запустите главный скрипт:

```bash
python etap_test_bot.py
```

Если всё настроено правильно, в консоли вы увидите сообщение `Bot started`. Теперь вы можете найти своего бота в Telegram и начать диалог командой `/start`. 