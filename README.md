# Telegram-бот для диагностики «Этап-Тест 7D»

Этот бот представляет собой инструмент для проведения психологической диагностики, основанной на методике «Этап-Тест 7D». Он проводит пользователя через серию вопросов и предоставляет подробный результат с интерпретацией и рекомендациями.

## Установка и запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <адрес_репозитория>
    cd <папка_с_проектом>
    ```

2.  **Установите зависимости:**
    Убедитесь, что у вас установлен Python 3.8+ и pip. Выполните команду для установки необходимых библиотек:
    ```bash
    pip install -r requirements.txt
    ```

3.  **Настройте конфигурацию:**
    -   Переименуйте файл `config.example.json` в `config.json`.
    -   Откройте `config.json` и вставьте ваш токен Telegram-бота, который вы получили от [@BotFather](https://t.me/BotFather).
    -   **BOT_TOKEN**: Ваш токен.
    -   **CHAT_ID_ADMIN**: ID вашего Telegram-чата для получения ответов пользователей на блок D (интервью). Можете узнать свой ID у бота [@userinfobot](https://t.me/userinfobot).
    -   **ADMIN_USERNAME**: Ваш ник в Telegram (без `@`). Он будет использоваться для кнопки "Записаться на консультацию".

4.  **Запустите бота:**
    ```bash
    python etap_test_bot.py
    ```

Бот начнет работать и будет доступен в Telegram.

## Методика подсчета результатов

Результаты теста рассчитываются на основе ответов пользователя на вопросы из разных блоков.

### 1. Определение основного этапа

-   Бот последовательно проверяет баллы, набранные за каждый **Блок Б** (Б1, Б2, Б3 и т.д.).
-   Для перехода на следующий этап необходимо набрать в текущем блоке **27 баллов или больше**.
-   Проверка останавливается, как только пользователь не набирает нужного количества баллов. Его итоговым этапом считается предыдущий.
    -   *Пример: Если пользователь набрал >=27 баллов за Б1 и Б2, но <27 баллов за Б3, его итоговым этапом будет **Этап 2**.*
    -   *Если пользователь не набрал 27 баллов даже за Б1, его этап — **нулевой**.*

### 2. Определение уровня внутри этапа

-   После определения основного этапа (например, Этап 2), бот анализирует количество баллов, набранное в соответствующем блоке (в нашем примере — в блоке Б2).
-   На основе этих баллов определяется уровень освоения этапа: **низкий (low)**, **средний (medium)** или **высокий (high)**.
-   Диапазоны баллов для каждого уровня определены в файле `interpretations.json`.

### 3. Расчет коэффициента искажения

-   Этот коэффициент рассчитывается на основе ответов на вопросы из **Блока В**.
-   Он показывает, насколько пользователь склонен давать «идеализированные», социально желательные ответы (например, "я никогда не злюсь").
-   Если коэффициент искажения равен **4 и более**, бот выдает предупреждение о том, что результаты могут быть неточными, и рекомендует пройти тест повторно, стараясь отвечать более искренне.

Вся логика и тексты для интерпретаций хранятся в файлах `questions_b.json` и `interpretations.json`. 